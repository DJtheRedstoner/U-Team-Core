buildscript {
	repositories {
		maven {
			url = "https://maven.minecraftforge.net"
		}
		maven {
			url = "https://repo.u-team.info"
		}
		mavenCentral()
	}
	dependencies {
		classpath group: "info.u-team.gradle_files", name: "gradle_files", version: "2.0.2", changing: true
	}
}

apply plugin: "info.u_team.gradle_files"

group = "info.u-team"
archivesBaseName = gradlefiles.archivesBaseName()
version = gradlefiles.version()

gradlefiles {
	vendor "Team UTeam"
}

// TODO move to gradle files
gradle.taskGraph.whenReady { TaskExecutionGraph graph ->
	def curseforgeTasks = graph.allTasks.findAll { task ->
		task.name.startsWith("curseforge")
	}
	def forgeTasks = curseforgeTasks.findAll { task ->
		task.project == project(":forge")
	}
	def fabricTasks = curseforgeTasks.findAll { task ->
		task.project == project(":fabric")
	}
	forgeTasks.each { task ->
		fabricTasks.each { fabricTask ->
			task.dependsOn(fabricTask)
		}
	}
}